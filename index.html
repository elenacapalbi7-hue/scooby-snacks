<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Scooby Snacks Game</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; font-family: sans-serif; touch-action: manipulation; }
        canvas { display: block; background: #000; margin: 0 auto; max-width: 100%; height: auto; }
        #ui { position: absolute; top: 10px; left: 10px; color: white; font-size: 20px; pointer-events: none; }
        #controls { position: absolute; bottom: 20px; width: 100%; text-align: center; }
        .btn { width: 100px; height: 100px; border-radius: 50%; border: none; background: rgba(255,255,255,0.3); color: white; font-size: 18px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="ui">Puntos: <span id="score">0</span></div>
    <canvas id="gameCanvas"></canvas>
    <div id="controls">
        <button class="btn" id="jumpBtn">SALTAR</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const jumpBtn = document.getElementById('jumpBtn');

        canvas.width = 400;
        canvas.height = 600;

        let score = 0;
        let gameActive = false;
        let scooby = { x: 50, y: 500, size: 40, dy: 0, jumpPower: -15, gravity: 0.8, grounded: true };
        let obstacles = [];
        let frame = 0;

        function drawScooby() {
            ctx.fillStyle = '#8B4513'; // Color MarrÃ³n Scooby
            ctx.fillRect(scooby.x, scooby.y, scooby.size, scooby.size);
        }

        function createObstacle() {
            if (frame % 100 === 0) {
                obstacles.push({ x: 400, y: 510, size: 30, speed: 4 });
            }
        }

        function update() {
            if (!gameActive) {
                ctx.fillStyle = "white";
                ctx.textAlign = "center";
                ctx.fillText("TOCA SALTAR PARA EMPEZAR", 200, 300);
                return;
            }

            scooby.dy += scooby.gravity;
            scooby.y += scooby.dy;

            if (scooby.y > 500) {
                scooby.y = 500;
                scooby.dy = 0;
                scooby.grounded = true;
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawScooby();

            obstacles.forEach((obs, index) => {
                obs.x -= obs.speed;
                ctx.fillStyle = "red";
                ctx.fillRect(obs.x, obs.y, obs.size, obs.size);

                if (scooby.x < obs.x + obs.size && scooby.x + scooby.size > obs.x && scooby.y < obs.y + obs.size && scooby.y + scooby.size > obs.y) {
                    resetGame();
                }

                if (obs.x + obs.size < 0) {
                    obstacles.splice(index, 1);
                    score++;
                    scoreEl.innerText = score;
                }
            });

            createObstacle();
            frame++;
            requestAnimationFrame(update);
        }

        function resetGame() {
            score = 0;
            scoreEl.innerText = score;
            obstacles = [];
            scooby.y = 500;
            gameActive = false;
        }

        jumpBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (!gameActive) { gameActive = true; update(); }
            if (scooby.grounded) {
                scooby.dy = scooby.jumpPower;
                scooby.grounded = false;
            }
        });

        update();
    </script>
</body>
</html>
