<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SCOBY: 25 LEVELS - SUPER LIGHT 19</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; touch-action: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }
        canvas { background: #111; max-width: 100%; max-height: 100%; border: 3px solid #ccff00; }
        * { font-family: 'Press Start 2P', cursive; }
        #ui { position: absolute; top: 10px; width: 92%; display: flex; justify-content: space-between; color: #ccff00; font-size: 10px; z-index: 100; pointer-events: none; text-shadow: 2px 2px #000; }
        .menu { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 200; color: white; text-align: center; }
        .btn-main { padding: 15px 30px; font-size: 16px; background: #ccff00; border: none; cursor: pointer; color: black; box-shadow: 0 5px 0 #88aa00; }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="ui">
            <div>LV: <span id="lvDisp">1</span></div>
            <div>üç™: <span id="sc">0</span></div>
            <div id="modeName" style="color:#fff;">PIXEL RUN</div>
        </div>

        <div id="mainMenu" class="menu">
            <h1 style="color:#ccff00; font-size:25px;">RECORDING MODE</h1>
            <p style="font-size:10px; margin-bottom:20px;">NIVEL 19: LUZ MAXIMA</p>
            <button class="btn-main" onclick="startGame()">INICIAR GRABACI√ìN</button>
        </div>

        <canvas id="c"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        canvas.width = 800; canvas.height = 450;

        const imgS = new Image(); imgS.src = '4d0e8e93e8663b020f6063451e53118a.png';
        const imgG = new Image(); imgG.src = 'eb4380a3cf64873dc0ebbad595d0886f.png';
        const imgB = new Image(); imgB.src = '1766045750713.png';
        const imgF = new Image(); imgF.src = '535eb96ca41945fbcd1774e60989d8e3.png';
        
        const sndJ = new Audio('audio saltoo.mp4');
        const sndE = new Audio('audio galletaa.mp4');
        const bgM = new Audio('DanLebowitzTiptoeOuttheBack.mp4');
        bgM.loop = true;

        let score = 0, level = 1, speed = 7.0, active = false, frame = 0;
        let scooby = { x: 80, y: 330, w: 75, h: 75, dy: 0, jumps: 0, opacity: 1 };
        let obs = [], snacks = [], bgX = 0;

        const gameMap = {
            1: { n: "PIXEL RUN", g: 0.95, j: -17, type: "normal" },
            2: { n: "SUBMARINO", g: 0.35, j: -10, type: "flota" },
            3: { n: "TECHO INVERTIDO", g: -0.95, j: 12, type: "techo" },
            4: { n: "ESCUDO GALLETA", g: 0.95, j: -17, type: "gigante_scoby" },
            5: { n: "EL T√öNEL", g: 0.40, j: -11, type: "tunel" },
            6: { n: "CARGA PESADA", g: 2.5, j: -26, type: "pesado" },
            7: { n: "MOON WALK", g: 0.95, j: -17, type: "lento" },
            8: { n: "GRAVEDAD LUNAR", g: 0.25, j: -12, type: "flota" },
            9: { n: "DOBLE AMENAZA", g: 0.95, j: -17, type: "doble" },
            10: { n: "GRAVEDAD ZERO", g: 0.15, j: -6, type: "flota" },
            11: { n: "TRAMPOL√çN", g: 0.95, j: -17, type: "bounce" },
            12: { n: "FANTASMAS GIGANTES", g: 1.1, j: -19, type: "gigante_obs" },
            13: { n: "MODO FANTASMA", g: 0.95, j: -17, type: "psicodelico" },
            14: { n: "SUELO DE FUEGO", g: 0.95, j: -17, type: "bounce_forced" },
            15: { n: "T√öNEL DE SOMBRAS", g: 0.45, j: -11, type: "tunel_transp" },
            16: { n: "ANCLA", g: 1.5, j: -18, type: "pesado" },
            17: { n: "FLASH RUN", g: 1.0, j: -18, type: "turbo" },
            18: { n: "C√ÅMARA INESTABLE", g: 0.95, j: -17, type: "vibracion" },
            19: { n: "LA CUEVA", g: 0.95, j: -17, type: "linterna" },
            20: { n: "T√öNEL M√ìVIL", g: 0.40, j: -11, type: "tunel" },
            21: { n: "VIENTO EN CONTRA", g: 0.95, j: -17, type: "viento" },
            22: { n: "INVISIBILIDAD", g: 0.95, j: -17, type: "invisible" },
            23: { n: "MULTISALTO", g: 1.2, j: -15, type: "infinito" },
            24: { n: "SUELO DE HIELO", g: 0.95, j: -17, type: "hielo" },
            25: { n: "EL GRAN FINAL", g: 0.5, j: -12, type: "tunel" }
        };

        function startGame() {
            active = true; score = 0; level = 1; speed = 7.0; obs = []; snacks = []; frame = 0;
            scooby = { x: 80, y: 330, w: 75, h: 75, dy: 0, jumps: 0, opacity: 1 };
            document.getElementById('mainMenu').style.display = 'none';
            bgM.play().catch(()=>{});
            animate();
        }

        function handleInput() {
            if(!active) return;
            sndJ.currentTime = 0; sndJ.play().catch(()=>{});
            let m = ((level - 1) % 25) + 1;
            let cfg = gameMap[m];
            if (["flota", "tunel", "pesado", "tunel_transp", "gigante_scoby", "linterna", "infinito", "techo"].includes(cfg.type)) {
                scooby.dy = cfg.j;
            } else {
                if(scooby.jumps < 2) { scooby.dy = cfg.j; scooby.jumps++; }
            }
        }

        window.onpointerdown = (e) => { e.preventDefault(); handleInput(); };

        function animate() {
            if (!active) return;
            let m = ((level - 1) % 25) + 1;
            let cfg = gameMap[m];
            
            ctx.save();
            if(cfg.type === "vibracion") ctx.translate(Math.random()*4-2, Math.random()*4-2);

            ctx.clearRect(0,0,800,450);
            document.getElementById('lvDisp').innerText = level;
            document.getElementById('sc').innerText = score;
            document.getElementById('modeName').innerText = cfg.n;

            let sActual = (cfg.type === "lento") ? speed * 0.5 : (cfg.type === "turbo" ? speed * 1.5 : speed);
            scooby.w = (cfg.type === "gigante_scoby") ? 130 : 75;
            scooby.h = (cfg.type === "gigante_scoby") ? 130 : 75;
            
            scooby.dy += cfg.g;
            scooby.y += scooby.dy;

            let gl = 450 - scooby.h - 40;
            if(cfg.type !== "techo") {
                if(scooby.y > gl) { scooby.y = gl; scooby.dy = 0; scooby.jumps = 0; if(cfg.type === "bounce" || cfg.type === "bounce_forced") scooby.dy = -18; }
            } else if(scooby.y < 20) { scooby.y = 20; scooby.dy = 0; }

            bgX -= (sActual/2); if(bgX <= -800) bgX = 0;
            ctx.drawImage(imgB, bgX, 0, 800, 450); ctx.drawImage(imgB, bgX+800, 0, 800, 450);

            if(cfg.type === "psicodelico") ctx.filter = `hue-rotate(${frame*5}deg)`;
            ctx.globalAlpha = (cfg.type === "invisible") ? (frame % 60 < 30 ? 0.2 : 1) : 1;
            ctx.drawImage(imgS, scooby.x, scooby.y, scooby.w, scooby.h);
            ctx.globalAlpha = 1; ctx.filter = "none";

            if(frame % 85 === 0) {
                let oH = (cfg.type === "gigante_obs") ? 140 : (cfg.type === "gigante_scoby" ? 35 : 60);
                if (cfg.type.includes("tunel")) {
                    obs.push({x: 800, y: 0, w: 100, h: 160, t: cfg.type});
                    obs.push({x: 800, y: 300, w: 100, h: 160, t: cfg.type});
                } else {
                    obs.push({x: 800, y: cfg.type === "techo" ? 20 : 410-oH, w: 60, h: oH});
                }
            }

            for(let i=obs.length-1; i>=0; i--) {
                obs[i].x -= (sActual + 2.5);
                if(obs[i].t === "
